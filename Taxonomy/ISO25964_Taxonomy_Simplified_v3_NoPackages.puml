@startuml
title ISO 25964 Taxonomy — Simplified Structural View (package-free)

skinparam linetype ortho
skinparam classAttributeIconSize 0
skinparam packageStyle rectangle
skinparam classFontSize 12
skinparam class {
  BackgroundColor White
  ArrowColor Black
  BorderColor Black
}
hide empty members
' ===== Core concepts =====
class ConceptScheme {
  +name : Text
  +description : Text?
}

class Concept {
  +notation : Text?
}

ConceptScheme "1" o-- "0..*" Concept : contains

' In-scheme semantic relations
Concept "0..*" -- "0..*" Concept : relatedTo
Concept "0..*" -down-|> "0..*" Concept : broader/narrower

note right of Concept
  • broader/narrower: hierarchy inside a scheme (no cycles)
  • relatedTo: associative link inside a scheme
end note

' ===== Terms =====
class Term {
  +label : Text
  +lang : LanguageTag
}

class PreferredTerm
class NonPreferredTerm {
  +use_note : Text?
}

Term <|-- PreferredTerm
Term <|-- NonPreferredTerm

Concept "1" -- "1..*" Term : has terms
Concept "1" -- "1..1" PreferredTerm : preferred per language
Concept "0..*" -- "0..*" NonPreferredTerm : synonyms/variants

' ===== Coordination & Compound Equivalence =====
class CoordinatedConcept {
  +label : Text
}
CoordinatedConcept "1" *-- "2..*" Concept : composed of

class CompoundEquivalence {
  +note : Text?
}
NonPreferredTerm "0..*" -- "0..*" CompoundEquivalence : triggers
CompoundEquivalence "1" -- "2..*" Concept : equals combination of

' ===== Collections (many-to-many with ordering via join entity) =====
class Collection {
  +name : Text
  +type : {facet, array, microthesaurus, set}
  +ordered : Boolean
  +description : Text?
}

class CollectionMember {
  +index : Integer?            ' position if Collection.ordered = true
  +role  : {core, recommended, optional}?
  +note  : Text?
}

ConceptScheme "0..*" -- "0..*" Collection : groups
Collection "1" -- "0..*" CollectionMember : has >
Concept   "1" -- "0..*" CollectionMember : member >
Collection "0..1" o-- "0..*" Collection : includes (nested)

note bottom of Collection
  Concepts may appear in multiple Collections.
  When ordered, an index per (Collection, Concept) pair is needed.
end note

' ===== Cross-scheme mappings (ISO 25964-2) =====
class Mapping {
  +type : {exactMatch, closeMatch, broadMatch, narrowMatch, relatedMatch}
  +justification : Text?
}

Concept "1" <-- "0..*" Mapping : source
Mapping "0..*" --> "1" Concept : target

note bottom of Mapping 
 Cross-scheme only (between different ConceptSchemes i.e. Taxonomies). 
 Do not use for in-scheme hierarchy/associations.
end note

' ===== House rules =====
note "Guidance:\n• One preferred term per language for each Concept.\n• Hierarchies must not loop (no cycles).\n• Collections are for curation and may be ordered; they are not hierarchies.\n• Compound equivalence: a non‑preferred term maps to a combination of Concepts.\n• Mapping = crosswalk across different schemes; use the *Match types." as N1
N1 .. Concept
N1 .. Term
N1 .. ConceptScheme
N1 .. Collection

@enduml
